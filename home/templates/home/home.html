{% extends 'base.html' %}

{% load static compress wagtailimages_tags wagtailcore_tags %}

{% block extra_css %}
	{% compress css %}
	    {# Override this in templates to add extra stylesheets #}
	    <!-- OWL CAROUSEL -->
	    <link rel="stylesheet" type="text/css" href="{% static 'plugins/owl-carousel/owl.carousel.css' %}">
	    <link rel="stylesheet" type="text/css" href="{% static 'plugins/owl-carousel/owl.theme.css' %}">
	    <link rel="stylesheet" type="text/css" href="{% static 'plugins/owl-carousel/owl.transitions.css' %}">
	    <!-- LIGHTBOX -->
	    <link rel="stylesheet" type="text/css" href="{% static 'plugins/lightbox/dist/css/lightbox.css' %}">
	    <!-- ICONS -->
	    <link rel="stylesheet" type="text/css" href="{% static 'plugins/icons/et-line-font/style.css' %}">
	    <!-- ANIMATE.CSS -->
	    <link rel="stylesheet" type="text/css" href="{% static 'plugins/animate.css/animate.css' %}">

	    <!-- CUSTOM CSS -->
	    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
	    <link rel="stylesheet" type="text/css" href="{% static 'css/hovereffects.css' %}">
	    <link rel="stylesheet" type="text/css" href="{% static 'css/festivaladvisor.css' %}">
	{% endcompress %}
{% endblock %}

{% block content %}

    <!-- PRELOADER -->
    <div class="preloader"><i class="fa fa-circle-o-notch fa-spin fa-2x"></i></div>

 	<!-- CAROUSEL -->	
	<section class="main-header">
	    <div id="owl-hero" class="owl-carousel owl-theme">
	    {% for item in featured %}
	    	<div class="item" style="background-image: url({{ item.main_image.file.url }})">
	            <div class="caption">
	                <h6>{{ item.name }} / {{ item.location|title }} / {{ item.date_representation }}</h6>
	                <h1><span>{{ item.name }}</span></h1>
	                <a class="btn btn-transparent" href="#">Meer info</a><a class="btn btn-light" href="#">Koop tickets</a>
	            </div>
	        </div>
	    {% endfor %}
	    </div>
	</section>
	<!-- FESTIVAL LIST -->
	<section id="portfolio">
        <div class="meer2">
            <em>FestivalAdvisor</em> Lees beoordelingen, vergelijk festivals en koop tickets!
        </div>
		<div class="container-fluid">
			<div class="row" id="fest-list-items">
				{% for fest in festivals %}
                <div class="col-lg-4 col-sm-6 festlist" data-wow-delay=".3s">
                    <a href="{% pageurl fest %}" class="portfolio-box">
                    {% if fest.main_image %}
                        {% image fest.main_image fill-700x430 as img %}
                        <img src="{{ img.url }}" class="img-responsive">
                    {% else %}
                        <img src="http://www.kljzaffelare.be/files/images/geen_foto.jpg" class="img-responsive">
                    {% endif %}
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-category">
                                    {{ fest.name|title }}
                                </div>
                                <div class="project-name">
                                    {{ fest.location|title }}
                                </div>
                                <div class="col-md-12">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                </div>
                                <div class="project-rating hidden-xs">
                                   <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Schrijf een beoordeling | <i class="fa fa-info-circle" aria-hidden="true"></i> Meer informatie
                                </div>
                                <div class="project-rating-xs visible-xs">
                                   <i class="fa fa-pencil-square-o fa-2x" aria-hidden="true"></i>   <i class="fa fa-info-circle fa-2x" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
            <div class="meer">
                <a id="<loadmore>" class="btn btn-transparent" disabled="disabled">
                	<i class="fa fa-plus-circle"></i> Toon meer
                </a>
                <a class="btn btn-transparent" href="/kalender/overview/">
                	<i class="fa fa-calendar"></i> Naar kalender 
                </a>
            </div>
        </div>
    </section>
    <!-- Google Map
    ============================================= -->
    <div id="map"></div>
    <!-- Testimonials
    ============================================= -->
    <section id="testimonials"  style="background-color: white; opacity: .65;">
        <div class="container">
            <h2>Festimonials</h2>
            <hr class="light-sep">
            <p>Onze festivalgangers over hun festivalavontuur</p>
            <div id="owl-testi" class="owl-carousel owl-theme">
                <div class="item">
                    <div class="quote">
                        <i class="fa fa-quote-left left fa-2x"></i>
                        <h5>Ik had nog nooit zo’n heerlijk festival meegemaakt, er ging een wereld voor me open. Er was zoveel respect voor elkaar, de natuur, de plek waar we mochten zijn. It really wás <span>Paradise</span>.<i class="fa fa-quote-right right fa-2x"></i></h5>
                    </div>
                </div>
                <div class="item">
                    <div class="quote">
                        <i class="fa fa-quote-left left fa-2x"></i>
                        <h5>Ik had nog nooit zo’n heerlijk festival meegemaakt, er ging een wereld voor me open. Er was zoveel respect voor elkaar, de natuur, de plek waar we mochten zijn. It really wás <span>Paradise</span>.<i class="fa fa-quote-right right fa-2x"></i></h5>
                    </div>
                </div>
                <div class="item">
                    <div class="quote">
                        <i class="fa fa-quote-left left fa-2x"></i>
                        <h5>Ik had nog nooit zo’n heerlijk festival meegemaakt, er ging een wereld voor me open. Er was zoveel respect voor elkaar, de natuur, de plek waar we mochten zijn. It really wás <span>Paradise</span>.<i class="fa fa-quote-right right fa-2x"></i></h5>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}

    <script src="js/custom.js"></script>
    <!-- JS PLUGINS -->
    <script src="plugins/owl-carousel/owl.carousel.min.js"></script>
    <script src="js/jquery.easing.min.js"></script>
    <script src="plugins/waypoints/jquery.waypoints.min.js"></script>
    <script src="plugins/countto/jquery.countto.js"></script>
    <script src="plugins/inview/jquery.inview.min.js"></script>
    <script src="plugins/Lightbox/dist/js/lightbox.min.js"></script>
    <script src="plugins/WOW/dist/wow.min.js"></script>
    <!-- GOOGLE MAP -->
    <script src="https://maps.googleapis.com/maps/api/js"></script>

{% block extra_js %}
    {# Override this in templates to add extra javascript #}
        {% compress js %}
        <!-- OWL CAROUSEL -->
        <script type="text/javascript" src="{% static 'owl-carousel/owl.carousel.js' %}"></script>
        <!--JQUERY EASING -->
        <script type="text/javascript" src="{% static 'js/jquery.easing.min.js' %}"></script>
        <!-- WAYPOINTS -->
        <script type="text/javascript" src="{% static 'plugins/waypoints/jquery.waypoints.min.js' %}"></script>
        <!-- COUNTTO -->
        <script type="text/javascript" src="{% static 'plugins/countto/jquery.countto.js' %}"></script>
        <!-- INVIEW -->
        <script type="text/javascript" src="{% static 'plugins/inview/jquery.inview.min.js' %}"></script>
        <!-- LIGHTBOX -->
        <script type="text/javascript" src="{% static 'plugins/lightbox/dist/js/lightbox.min.js' %}"></script>
        <!-- WOW -->
        <script type="text/javascript" src="{% static 'plugins/WOW/dist/wow.min.js' %}"></script>
        <!-- GOOGLE MAPS -->
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>

        <!-- CUSTOM CSS -->
        <script type="text/javascript" src="{% static 'js/custom.js' %}"></script>

        <script type="text/javascript" src="{% static 'js/test.js' %}"></script>
    {% endcompress %}
    <script type="text/javascript">
        var map;
        var global_markers = [];

        var markers = [{% for festival in festivals %}{% if festival.location.latitude %}[{{ festival.location.latitude|stringformat:'f' }},{{ festival.location.longitude|stringformat:'f' }}, '{{ festival.name }}'],{% endif %}
                        {% endfor %}];


        //var markers = [[37.09024, -95.712891, 'trialhead0'], [-14.235004, -51.92528, 'trialhead1'], [-38.416097, -63.616672, 'trialhead2']];

        var infowindow = new google.maps.InfoWindow({});

        function initialize() {
            geocoder = new google.maps.Geocoder();
            var latlng = new google.maps.LatLng(50.8333, 4.0000); 
            var myOptions = {
                zoom: 7,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            map = new google.maps.Map(document.getElementById("map"), myOptions);
            addMarker();
        }

        function addMarker() {
            for (var i = 0; i < markers.length; i++) {
                // obtain the attribues of each marker
                var lat = parseFloat(markers[i][0]);
                var lng = parseFloat(markers[i][1]);
                var trailhead_name = markers[i][2];

                var myLatlng = new google.maps.LatLng(lat, lng);

                var contentString = "<html><body><div><p><h2>" + trailhead_name + "</h2></p></div></body></html>";

                var marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    title: "Coordinates: " + lat + " , " + lng + " | Trailhead name: " + trailhead_name
                });

                marker['infowindow'] = contentString;

                global_markers[i] = marker;

                google.maps.event.addListener(global_markers[i], 'click', function() {
                    infowindow.setContent(this['infowindow']);
                    infowindow.open(map, this);
                });
            }
        }

        window.onload = initialize;


    </script>
{% endblock %}
