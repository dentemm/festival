{% extends 'home/festival_page.html' %}

{% load rating_tags static compress comments wagtailimages_tags wagtailcore_tags %}


{% block content %} 
	<section id="owlcalendar" style="margin-top:85px;">
		{% if festival_list %}
    	<div class="owl-carousel owl-theme">
    		{% for festival in festival_list reversed %}
    		{% image festival.main_image height-400 as tmp_photo %}
    		{% with bezig=festival.ongoing %}
    		<div class="item" style="height:400px; background: url({{ tmp_photo.url }}); background-size: auto 100%;
					background-repeat: no-repeat; background-position: center center; {% if not bezig %}opacity: 0.3;{% endif %}">
    			<time datetime="{{ festival.date }}" class="icon">
    				{% if festival.duration == 1 %}
    					<em>{{ festival.date|date:'l' }}</em>
		                <div class="{% if not bezig %}fa_passive{% else %}fa_active{% endif %}">{{ festival.date|date:'F' }}</div>
		                <span>{{ festival.date|date:'d' }}</span>
	                {% else %}
	                	{% if festival.check_month_span %}
		                	<em>{{ festival.date|date:'D' }} - {{ festival.end_date|date:'D' }}</em>
		                	<div class="{% if not bezig %}fa_passive{% else %}fa_active{% endif %}">{{ festival.date|date:'F' }} - {{ festival.end_date|date:'F' }}</div>
		                	<span>{{ festival.date|date:'d' }} - {{ festival.end_date|date:'d' }}</span>
	                	{% else %}
		                	<em>{{ festival.date|date:'D' }} - {{ festival.end_date|date:'D' }}</em>
		                	<div class="{% if not bezig %}fa_passive{% else %}fa_active{% endif %}">{{ festival.date|date:'F' }}</div>
		                	<span>{{ festival.date|date:'d' }} - {{ festival.end_date|date:'d' }}</span>
	                	{% endif %}
	                {% endif %}
                </time>
                <div class="fa_name">{{ festival.name }}</div>
    		</div>
    		{% endwith %}
    		{% endfor %}
    	</div>
    	{% endif %}
    </section>

	<div class="container">
		<div class="row">
			<div class="col-md-4">
			{% if previous_month %}
				<a class="btn btn-default" href="/festival-index/calendar/overview/?year={{ previous_month|date:'Y' }}&month={{ previous_month|date:'b' }}">
					&larr; {{ previous_month|date:'M Y' }}
				</a>
			{% endif %}
			</div>
			<div class="col-md-4 col-md-offset-4">
			{% if next_month %}
				<a class="btn btn-default" href="/festival-index/calendar/overview/?year={{ next_month|date:'Y' }}&month={{ next_month|date:'b' }}">
					{{ next_month|date:'M Y' }} &rarr;
				</a>
			{% endif %}
			</div>
		</div>
		<div class="row">
		{% if festival_list %}
			{% for festival in festival_list reversed %}
			<div class="col-md-4">
				<div class="panel panel-bold panel-info">
					<div class="panel-heading">
						{% image festival.main_image fill-200x100 as tmp_photo %}
						<img src="{{ tmp_photo.url }}" class="img-responsive" style="height: 100px">
					</div>
					<div class="panel-body">
						<h3>{{ festival.name }}</h3>
						<h5>{{ festival.date }}</h5>
					</div>
				</div>
			</div>
			{% endfor %}
		{% else %}
			<div class="col-md-4 col-md-offset-4">
				<h5>Tis leeg!</h5>
			</div>
			
		{% endif %}
		</div>
	</div>

{% endblock content %}

{% block extra_js %}
    {# Override this in templates to add extra javascript #}
    	{{ block.super }}
    	{% compress js %}
    	<!--<script type="text/javascript">
    		$(window).on('load', function() {

    			console.log('ready')
				$('.images2').imageGrid();
				console.log('ready')

    		});
    	</script>-->

	    {% endcompress %}
{% endblock extra_js %}